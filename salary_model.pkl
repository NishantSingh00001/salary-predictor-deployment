import pandas as pd
import numpy as np
from sklearn.linear_model import LinearRegression
import pickle
from google.colab import files

# 1. Generate the same realistic data
np.random.seed(42)
n_rows = 200
experience = np.random.randint(0, 20, n_rows)
test_score = np.random.randint(4, 11, n_rows)
interview_score = np.random.randint(4, 11, n_rows)

# Formula with noise for ~73% accuracy
noise = np.random.normal(0, 15000, n_rows) 
salary = 35000 + (experience * 4200) + (test_score * 800) + (interview_score * 400) + noise

df = pd.DataFrame({
    'experience': experience,
    'test_score': test_score,
    'interview_score': interview_score,
    'salary': salary
})

# 2. Train the model
X = df[['experience', 'test_score', 'interview_score']]
y = df['salary']
model = LinearRegression()
model.fit(X, y)

# 3. Save and Download the binary file
with open('salary_model.pkl', 'wb') as f:
    pickle.dump(model, f)

files.download('salary_model.pkl')
print("Model saved and downloading...")
